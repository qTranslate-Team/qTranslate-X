qtranxj_get_split_blocks=function(b){var a=/(<!--:[a-z]{2}-->|<!--:-->|\[:[a-z]{2}\]|\[:\]|\{:[a-z]{2}\}|\{:\})/gi;return b.xsplit(a)};qtranxj_split=function(b){var a=qtranxj_get_split_blocks(b);return qtranxj_split_blocks(a)};qtranxj_split_blocks=function(a){var l=new Object;for(var c in qTranslateConfig.language_config){l[c]=""}if(!a||!a.length){return l}if(a.length==1){var j=a[0];for(var c in qTranslateConfig.language_config){l[c]+=j}return l}var e=/<!--:([a-z]{2})-->/gi;var h=/\[:([a-z]{2})\]/gi;var d=/\{:([a-z]{2})\}/gi;var c=false;var g;for(var f=0;f<a.length;++f){var j=a[f];if(!j.length){continue}g=e.exec(j);e.lastIndex=0;if(g!=null){c=g[1];continue}g=h.exec(j);h.lastIndex=0;if(g!=null){c=g[1];continue}g=d.exec(j);d.lastIndex=0;if(g!=null){c=g[1];continue}if(j=="<!--:-->"||j=="[:]"||j=="{:}"){c=false;continue}if(c){if(!l[c]){l[c]=j}else{l[c]+=j}c=false}else{for(var k in l){l[k]+=j}}}return l};function qtranxj_get_cookie(d){var b=d+"=";var c=document.cookie.split(";");for(var e=0;e<c.length;++e){var f=c[e];var a=f.split("=");if(a[0].trim()!=d){continue}if(c.length<2){continue}return a[1].trim()}return""}String.prototype.xsplit=function(c){if("a~b".split(/(~)/).length===3){return this.split(c)}if(!c.global){c=new RegExp(c.source,"g"+(c.ignoreCase?"i":""))}var d=0,b=[];var a;while((a=c.exec(this))!=null){b.push(this.slice(d,a.index));if(a.length>1){b.push(a[1])}d=c.lastIndex}if(d<this.length){b.push(this.slice(d))}if(d==this.length){b.push("")}return b};function qtranxj_ce(c,e,b,a){var d=document.createElement(c);if(e){for(prop in e){d[prop]=e[prop]}}if(b){if(a&&b.firstChild){b.insertBefore(d,b.firstChild)}else{b.appendChild(d)}}return d}var qTranslateX=function(A){var k=this;qTranslateConfig.qtx=this;this.getLanguages=function(){return qTranslateConfig.language_config};this.getFlagLocation=function(){return qTranslateConfig.flag_location};this.isLanguageEnabled=function(f){return !!qTranslateConfig.language_config[f]};var w=function(f){document.cookie="qtrans_edit_language="+f};qTranslateConfig.activeLanguage;if(qTranslateConfig.LSB){qTranslateConfig.activeLanguage=qtranxj_get_cookie("qtrans_edit_language");if(!qTranslateConfig.activeLanguage||!this.isLanguageEnabled(qTranslateConfig.activeLanguage)){qTranslateConfig.activeLanguage=qTranslateConfig.language;if(this.isLanguageEnabled(qTranslateConfig.activeLanguage)){w(qTranslateConfig.activeLanguage)}else{qTranslateConfig.LSB=false}}}else{qTranslateConfig.activeLanguage=qTranslateConfig.language;w(qTranslateConfig.activeLanguage)}this.getActiveLanguage=function(){return qTranslateConfig.activeLanguage};this.getLanguages=function(){return qTranslateConfig.language_config};var b={};var t=0;var x=function(H,i){var f=b[H];var G=i.trim();f.fields[f.lang].value=G};this.hasContentHook=function(f){return b[f]};this.addContentHook=function(R,P,L){if(!R){return false}switch(R.tagName){case"TEXTAREA":break;case"INPUT":if(R.type.match(/(button|checkbox|password|radio|submit)/)){return false}break;default:return false}if(!L){if(!R.name){return false}L=R.name}if(R.id){if(b[R.id]){if(jQuery.contains(document,R)){return b[R.id]}k.removeContentHook(R)}}else{jQuery(R).uniqueId()}var M=b[R.id]={};M.name=L;M.contentField=R;M.lang=qTranslateConfig.activeLanguage;var K=qtranxj_split(R.value);R.value=K[M.lang];var J;if(P){switch(P){case"slug":J="qtranslate-slugs[";break;case"term":J="qtranslate-terms[";break;default:J="qtranslate-fields[";break}}else{P="[";J="qtranslate-fields["}var Q,I,i=M.name.indexOf("[");if(i<0){Q=J+M.name+"]"}else{Q=J+M.name.substring(0,i)+"]";if(M.name.lastIndexOf("[]")<0){Q+=M.name.substring(i)}else{var O=M.name.length-2;if(O>i){Q+=M.name.substring(i,O)}I="[]"}}M.fields={};for(var H in K){var S=K[H];var G=Q+"["+H+"]";if(I){G+=I}var N=qtranxj_ce("input",{name:G,type:"hidden",className:"hidden",value:S});M.fields[H]=N;R.parentNode.insertBefore(N,R)}switch(P){case"slug":case"term":M.sepfield=qtranxj_ce("input",{name:Q+"[qtranslate-original-value]",type:"hidden",className:"hidden",value:K[qTranslateConfig.default_language]});break;default:M.sepfield=qtranxj_ce("input",{name:Q+"[qtranslate-separator]",type:"hidden",className:"hidden",value:P});break}R.parentNode.insertBefore(M.sepfield,R);M.encode=P;R.className+=" qtranxs-translatable";return M};this.addContentHookC=function(f){return k.addContentHook(f,"[")};this.addContentHookB=function(f){return k.addContentHook(f,"[")};this.addContentHookById=function(G,i,f){return k.addContentHook(document.getElementById(G),i,f)};this.addContentHookByIdName=function(f){var i;switch(f[0]){case"<":case"[":i=f.substring(0,1);f=f.substring(1);break;default:break}return k.addContentHookById(f,i)};this.addContentHookByIdC=function(f){return k.addContentHookById(f,"[")};this.addContentHookByIdB=function(f){return k.addContentHookById(f,"[")};this.addContentHooks=function(f,G,I){for(var H=0;H<f.length;++H){var J=f[H];k.addContentHook(J,G,I)}};var e=function(i,G,H){if(!G){G=document}var f=G.getElementsByClassName(i);k.addContentHooks(f,H)};this.addContentHooksByClass=function(f,i){var G;if(f.indexOf("<")==0||f.indexOf("[")==0){G=f.substring(0,1);f=f.substring(1)}e(f,i,G)};this.addContentHooksByTagInClass=function(G,f,H){var J=H.getElementsByClassName(G);for(var K=0;K<J.length;++K){var L=J[K];var I=L.getElementsByTagName(f);k.addContentHooks(I)}};var s=function(f){if(!f){return false}if(f.sepfield){jQuery(f.sepfield).remove()}for(var i in f.fields){jQuery(f.fields[i]).remove()}delete b[f.contentField.id];return true};this.removeContentHook=function(f){if(!f){return false}if(!f.id){return false}if(!b[f.id]){return false}var i=b[f.id];s(i);jQuery(f).removeClass("qtranxs-translatable");return true};this.refreshContentHook=function(f){if(!f){return false}if(!f.id){return false}var i=b[f.id];if(i){s(i)}return k.addContentHook(f)};var B=[];var E=function(G){if(!G.nodeValue){return 0}var i=qtranxj_get_split_blocks(G.nodeValue);if(!i||!i.length||i.length==1){return 0}var f={};f.nd=G;f.contents=qtranxj_split_blocks(i);G.nodeValue=f.contents[qTranslateConfig.activeLanguage];B.push(f);return 1};var C=[];var D=function(G){if(!G.value){return 0}var i=qtranxj_get_split_blocks(G.value);if(!i||!i.length||i.length==1){return 0}var f={};f.nd=G;f.contents=qtranxj_split_blocks(i);G.value=f.contents[qTranslateConfig.activeLanguage];C.push(f);return 1};this.addDisplayHook=function(H){if(!H||!H.tagName){return 0}switch(H.tagName){case"TEXTAREA":return 0;case"INPUT":switch(H.type){case"submit":if(H.value){return D(H)}default:return 0}default:break}var G=0;if(H.childNodes&&H.childNodes.length){for(var f=0;f<H.childNodes.length;++f){var I=H.childNodes[f];switch(I.nodeType){case 1:G+=k.addDisplayHook(I);break;case 2:case 3:G+=E(I);break;default:break}}}return G};this.addDisplayHookById=function(f){return k.addDisplayHook(document.getElementById(f))};var z=function(f){text=f.contentField.value;if(f.wpautop&&window.switchEditors){text=window.switchEditors.wpautop(text)}f.mce.setContent(text,{format:"html"})};var c=function(K){w(K);for(var H=B.length;--H>=0;){var I=B[H];if(I.nd.parentNode){I.nd.nodeValue=I.contents[K]}else{B.splice(H,1)}}for(var H=C.length;--H>=0;){var I=C[H];if(I.nd.parentNode){I.nd.value=I.contents[K]}else{C.splice(H,1)}}for(var G in b){var I=b[G];var f=I.mce&&!I.mce.hidden;if(f){I.mce.save({format:"html"})}I.fields[I.lang].value=I.contentField.value;I.lang=K;var J=I.fields[I.lang].value;if(I.contentField.placeholder&&J!=""){I.contentField.placeholder=""}I.contentField.value=J;if(f){z(I)}}};this.addDisplayHooks=function(f){for(var G=0;G<f.length;++G){var H=f[G];k.addDisplayHook(H)}};this.addDisplayHooksByClass=function(f,i){var G=i.getElementsByClassName(f);k.addDisplayHooks(G)};this.addDisplayHooksByTagInClass=function(G,f,H){var J=H.getElementsByClassName(G);for(var K=0;K<J.length;++K){var L=J[K];var I=L.getElementsByTagName(f);k.addDisplayHooks(I)}};this.addCustomContentHooks=function(){for(var G=0;G<qTranslateConfig.custom_fields.length;++G){var f=qTranslateConfig.custom_fields[G];k.addContentHookByIdName(f)}for(var G=0;G<qTranslateConfig.custom_field_classes.length;++G){var f=qTranslateConfig.custom_field_classes[G];k.addContentHooksByClass(f)}if(qTranslateConfig.LSB){setTinyMceInit()}};var m=function(f){f(".i18n-multilingual").each(function(G,H){k.addContentHook(H,"[")});f(".i18n-multilingual-curly").each(function(G,H){k.addContentHook(H,"{")});f(".i18n-multilingual-term").each(function(G,H){k.addContentHook(H,"term")});f(".i18n-multilingual-slug").each(function(G,H){k.addContentHook(H,"slug")});f(".i18n-multilingual-display").each(function(G,H){k.addDisplayHook(H)})};var j=function(R){for(var P in R){var O=R[P];var H;if(O.form){if(O.form.id){H=document.getElementById(O.form.id)}else{if(O.form.jquery){H=$(O.form.jquery)}else{if(O.form.name){var J=document.getElementsByName(O.form.name);if(J&&J.length){H=J[0]}}}}}else{H=document.getElementById(P)}if(!H){H=g();if(!H){H=document}}for(var N in O.fields){var K=O.fields[N];var I=[];if(K.container_id){var f=document.getElementById(K.container_id);if(f){I.push(f)}}else{if(K.container_jquery){I=$(K.container_jquery)}else{if(K.container_class){I=document.getElementsByClassName(K.container_class)}else{I.push(H)}}}var Q=K.encode;switch(Q){case"none":continue;case"display":if(K.jquery){for(var L=0;L<I.length;++L){var f=I[L];var M=jQuery(f).find(K.jquery);k.addDisplayHooks(M)}}else{var G=K.id?K.id:N;k.addDisplayHook(document.getElementById(G))}break;case"[":case"<":case"{":case"byline":default:if(K.jquery){for(var L=0;L<I.length;++L){var f=I[L];var M=jQuery(f).find(K.jquery);k.addContentHooks(M,Q,K.name)}}else{var G=K.id?K.id:N;k.addContentHookById(G,Q,K.name)}break}}}};var p=function(){function f(i){var K=i.id;if(!K){return}var H=b[K];if(!H){return}if(H.mce){return}H.mce=i;i.getContainer().className+=" qtranxs-translatable";i.getElement().className+=" qtranxs-translatable";var G=H.updateTinyMCEonInit;if(G==null){var J=i.getContent({format:"html"}).replace(/\s+/g,"");var I=H.contentField.value.replace(/\s+/g,"");G=J!=I}if(G){z(H)}return H}setTinyMceInit=function(){if(!window.tinyMCE){return}for(var i in b){var G=b[i];if(G.contentField.tagName!=="TEXTAREA"){continue}if(G.mce){continue}if(G.mceInit){continue}if(!tinyMCEPreInit.mceInit[i]){continue}G.mceInit=tinyMCEPreInit.mceInit[i];if(G.mceInit.wpautop){G.wpautop=G.mceInit.wpautop;var H=tinymce.DOM.select("#wp-"+i+"-wrap");if(H&&H.length){G.wrapper=H[0];if(G.wrapper){if(tinymce.DOM.hasClass(G.wrapper,"tmce-active")){G.updateTinyMCEonInit=true}if(tinymce.DOM.hasClass(G.wrapper,"html-active")){G.updateTinyMCEonInit=false}}}}else{G.updateTinyMCEonInit=false}tinyMCEPreInit.mceInit[i].init_instance_callback=function(I){f(I)}}};setTinyMceInit();loadTinyMceHooks=function(){if(!window.tinyMCE){return}if(!tinyMCE.editors){return}for(var H=0;H<tinyMCE.editors.length;++H){var G=tinyMCE.editors[H];f(G)}};window.addEventListener("load",loadTinyMceHooks)};if(!qTranslateConfig.onTabSwitchFunctions){qTranslateConfig.onTabSwitchFunctions=[]}if(!qTranslateConfig.onTabSwitchFunctionsSave){qTranslateConfig.onTabSwitchFunctionsSave=[]}if(!qTranslateConfig.onTabSwitchFunctionsLoad){qTranslateConfig.onTabSwitchFunctionsLoad=[]}this.addLanguageSwitchListener=function(f){qTranslateConfig.onTabSwitchFunctions.push(f)};this.addLanguageSwitchBeforeListener=function(f){qTranslateConfig.onTabSwitchFunctionsSave.push(f)};this.delLanguageSwitchBeforeListener=function(H){for(var G=0;G<qTranslateConfig.onTabSwitchFunctionsSave.length;++G){var I=qTranslateConfig.onTabSwitchFunctionsSave[G];if(I!=H){continue}qTranslateConfig.onTabSwitchFunctionsSave.splice(G,1);return}};this.addLanguageSwitchAfterListener=function(f){qTranslateConfig.onTabSwitchFunctionsLoad.push(f)};this.delLanguageSwitchAfterListener=function(H){for(var G=0;G<qTranslateConfig.onTabSwitchFunctionsLoad.length;++G){var I=qTranslateConfig.onTabSwitchFunctionsLoad[G];if(I!=H){continue}qTranslateConfig.onTabSwitchFunctionsLoad.splice(G,1);return}};this.enableLanguageSwitchingButtons=function(G){var J=G?"block":"none";for(var L in qTranslateConfig.tabSwitches){var K=qTranslateConfig.tabSwitches[L];for(var H=0;H<K.length;++H){var I=K[H];var f=K[H].parentElement;f.style.display=J;break}break}};var g=function(){var J=document.getElementsByClassName("wrap");for(var I=0;I<J.length;++I){var G=J[I];var H=G.getElementsByTagName("form");if(H.length){return H[0]}}var H=document.getElementsByTagName("form");if(H.length===1){return H[0]}for(var I=0;I<H.length;++I){var K=H[I];J=K.getElementsByClassName("wrap");if(J.length){return K}}return null};var d=function(){var H=document.getElementsByTagName("form");for(var J=0;J<H.length;++J){var K=H[J];var I=K.getElementsByClassName("wrap");if(I.length){return I[0]}}var I=document.getElementsByClassName("wrap");for(var J=0;J<I.length;++J){var G=I[J];H=G.getElementsByTagName("form");if(H.length){return G}}return null};if(typeof(A.addContentHooks)=="function"){A.addContentHooks(this)}if(qTranslateConfig.page_config&&qTranslateConfig.page_config.forms){j(qTranslateConfig.page_config.forms)}m(jQuery);if(!B.length&&!C.length){var l=false;for(var F in b){l=true;break}if(!l){return}}this.switchActiveLanguage=function(){var O=this;var G=O.lang;if(!G){alert("qTranslate-X: This should not have happened: Please, report this incident to the developers: !lang");return}if(qTranslateConfig.activeLanguage===G){return}if(qTranslateConfig.activeLanguage){var L=true;var f=qTranslateConfig.onTabSwitchFunctionsSave;for(var K=0;K<f.length;++K){var M=f[K].call(qTranslateConfig.qtx,qTranslateConfig.activeLanguage,G);if(M===false){L=false}}if(!L){return}var J=qTranslateConfig.tabSwitches[qTranslateConfig.activeLanguage];for(var K=0;K<J.length;++K){J[K].classList.remove(qTranslateConfig.lsb_style_active_class)}}var I=qTranslateConfig.activeLanguage;qTranslateConfig.activeLanguage=G;var J=qTranslateConfig.tabSwitches[qTranslateConfig.activeLanguage];for(var K=0;K<J.length;++K){J[K].classList.add(qTranslateConfig.lsb_style_active_class)}var N=qTranslateConfig.onTabSwitchFunctions;for(var K=0;K<N.length;++K){N[K].call(qTranslateConfig.qtx,G,I)}var H=qTranslateConfig.onTabSwitchFunctionsLoad;for(var K=0;K<H.length;++K){H[K].call(qTranslateConfig.qtx,G,I)}};var a=function(){var G=qtranxj_ce("ul",{className:qTranslateConfig.lsb_style_wrap_class});var H=qTranslateConfig.language_config;if(!qTranslateConfig.tabSwitches){qTranslateConfig.tabSwitches={}}for(var J in H){var i=H[J];var f=qTranslateConfig.flag_location;var I=qtranxj_ce("li",{lang:J,className:"qtranxs-lang-switch",onclick:qTranslateConfig.qtx.switchActiveLanguage},G);qtranxj_ce("img",{src:f+i.flag},I);qtranxj_ce("span",{innerHTML:i.name},I);if(qTranslateConfig.activeLanguage==J){I.classList.add(qTranslateConfig.lsb_style_active_class)}if(!qTranslateConfig.tabSwitches[J]){qTranslateConfig.tabSwitches[J]=[]}qTranslateConfig.tabSwitches[J].push(I)}return G};var y=function(G){var I=document.getElementById("qtranxs-meta-box-lsb");if(!I){return}var H=I.getElementsByClassName("inside");if(!H.length){return}I.className+=" closed";G(I).find(".hndle").remove();var i=document.createElement("span");I.insertBefore(i,H[0]);i.className="hndle ui-sortable-handle";var f=a();i.appendChild(f);G(function(J){J("#qtranxs-meta-box-lsb .hndle").unbind("click.postboxes")})};if(qTranslateConfig.LSB){p();y(jQuery);var n=[];if(qTranslateConfig.page_config&&qTranslateConfig.page_config.anchors){for(var o in qTranslateConfig.page_config.anchors){var h=qTranslateConfig.page_config.anchors[o];var u=document.getElementById(o);if(u){n.push({f:u,where:h.where})}else{if(h.jquery){var v=jQuery(h.jquery);for(var r=0;r<v.length;++r){var u=v[r];n.push({f:u,where:h.where})}}}}}if(!n.length){var u=A.langSwitchWrapAnchor;if(!u){u=g()}if(u){n.push({f:u,where:"before"})}}for(var r=0;r<n.length;++r){var h=n[r];if(!h.where||h.where.indexOf("before")>=0){var q=a();h.f.parentNode.insertBefore(q,h.f)}if(h.where&&h.where.indexOf("after")>=0){var q=a();h.f.parentNode.insertBefore(q,h.f.nextSibling)}if(h.where&&h.where.indexOf("first")>=0){var q=a();h.f.insertBefore(q,h.f.firstChild)}if(h.where&&h.where.indexOf("last")>=0){var q=a();h.f.insertBefore(q,null)}}this.addLanguageSwitchListener(c);if(A.onTabSwitch){this.addLanguageSwitchListener(A.onTabSwitch)}}};qTranslateConfig.js.get_qtx=function(){if(!qTranslateConfig.qtx){new qTranslateX(qTranslateConfig.js)}return qTranslateConfig.qtx};jQuery(document).ready(qTranslateConfig.js.get_qtx);